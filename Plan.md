## Дипломный проект: Автоматизация тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка

## Описание приложения

Приложение предлагает купить тур по определенной цене по дебетовой карте или в кредит по данным банковской карты.

![image](https://user-images.githubusercontent.com/113614187/222971178-69d27759-6005-4d79-83e3-b9598d77065a.png)

## Техническая часть
Приложение расположено в файле aqa-shop.jar и запускается стандартным способом java -jar aqa-shop.jar на порту 8080.

В файле application.properties приведён ряд типовых настроек:

* учётные данные и URL для подключения к СУБД;

* URL-адреса банковских сервисов.

## СУБД

Заявлена поддержка двух СУБД:

* MySQL

* PostgreSQL

Учётные данные и URL для подключения задаются в файле application.properties

## Банковские сервисы

Разработчики подготовили симулятор банковских сервисов, который может принимать запросы в нужном формате и генерировать ответы.

Симулятор написан на Node.js, поэтому для запуска вам нужен либо Docker, либо установленный Node.js. 

Симулятор расположен в каталоге gate-simulator. Для запуска нужно перейти в этот каталог.

Симулятор запускается командой npm start на порту 9999. Он позволяет генерировать предопределенные ответы для заданного набора карт. 

Набор карт представлен в формате JSON в файле data.json.

Разработчики сделали один сервис, симулирующий и Payment Gate, и Credit Gate.

# Планирование автоматизации тестирования

# 1. Перечень автоматизируемых сценариев покупки тура

## Исходные данные:
валидный номер банковской карты   - “4444 4444 4444 4441”

невалидный номер банковской карты - “4444 4444 4444 4442”

## Требования к заполнению полей для данных банковской карты

### Номер карты
* поле обязательно для заполнения
* поле должно содержать только цифры, в количестве - 16
* недопустимо заполнение поля с меньшим или большим количеством цифр, чем указано в предыдущем пункте
* недопустимо вводить в начало поля пробел
* недопустимо вводить в конце поля пробел
* недопустимо вводить в поле номера карты другого банка, которого нет в базе данных банка
* недопустимо вводить в поле спецсимволов
* недопустимо вводить в поле буквы

### Месяц
* поле обязательно для заполнения
* поле должно содержать только цифры от 01 до 12 
* количество цифр в поле - 2
* недопустимо заполнение поля с меньшим или большим количеством цифр, чем указано в предыдущем пункте
* недопустимо вводить в поле месяц, предшествующим текущему текущего года

### Год
* поле обязательно для заполнения
* поле должно содержать только цифры от 20 до 28 (т.е. +5 лет от текущего года)
* допустимо заполнение поля только цифрами 
* количество цифр в поле - 2
* недопустимо заполнение поля с меньшим или большим количеством цифр, чем указано в предыдущем пункте

### Владелец
* поле обязательно для заполнения
* допустимо заполнение поля на любой языковой раскладке (русский, английский, китайский)
* минимальное количество букв - 2
* недопустимо заполнение поля с меньшим количеством букв, чем указано в предыдущем пункте	
* недопустимо вводить в начало поля пробел
* недопустимо вводить в конце поля пробел
* недопустимо вводить в поле  цифры
* недопустимо вводить в поле спецсимволы (например, "~!@$%№")
* недопустимо вводить в поле  апострофы
* недопустимо вводить в поле  полностью ФИО
* допустимо заполнение в нижнем регистре (например, "ivan petrov);
* допустимо заполнение в верхнем регистре (например, "IVAN PETROV");

### CVC/CVV
* поле обязательно для заполнения
* допустимо заполнение поля только цифрами
* количество цифр в поле - 3
* недопустимо заполнение поля с меньшим или большим количеством цифр, чем указано в предыдущем пункте
* недопустимо вводить в поле спецсимволы (например,@!#*&^)
* недопустимо вводить в поле буквы

## Позитивные сценарии покупки тура

### Сценарий 1
*Отправить заявку на покупку тура с валидными данными всех полей*

*Шаги воспроизведения:*

1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести валидные данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить".

*Ожидаемый результат:*
Покупка тура успешно выполнена.

Появится  всплывающее окно с сообщением "Успешно. Операция одобрена Банком"

### Сценарий 2
*Отправить заявку на покупку тура с валидным данными всех полей (заполнения поля “Владельца” карты на кириллице)*

*Шаги воспроизведения:*

1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести валидные данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Иванов Иван"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить".

*Ожидаемый результат:*
Покупка тура успешно выполнена.

Появится  всплывающее окно с сообщением "Успешно. Операция одобрена Банком".

### Сценарий 3
*Отправить заявку на покупку тура с валидным данными всех полей (указать в поле  “Номер карты”  номер банковской карты, по которой операция должна отклониться)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить";
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4442"

"Месяц" = "05"

"Год" = "23"

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить".

*Ожидаемый результат:*
Покупка тура не выполнена.

Появится  всплывающее окно с сообщением "Ошибка! Банк отказал в проведении операции".

Аналогичные тестовые сценарии для заявки  "Купить в кредит”.

## Негативные сценарии покупки тура

Сценарии, при который одно или несколько из полей заполнены невалидными данными.

### Сценарий 1
*Отправка заявки с пустыми полями*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*
Покупка тура не выполнена

Под полем “Номер карты” появится  сообщение "Неверный формат"

Под полем “Месяц” появится  сообщение "Неверный формат"

Под полем “Год” появится  сообщение "Неверный формат"

Под полем “Владелец” появится  сообщение "Поле обязательно для заполнения"

Под полем “CVC/СММ” появится  сообщение "Неверный формат"

### Сценарий 2
*Отправка заявки с пустым полем “Номер карты”*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = ""

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*
Данные не отправлены.

Под полем “Номер карты” появится  сообщение "Неверный формат".

### Сценарий 3
*Отправка заявки с недостаточным количеством цифр в поле “Номер карты”*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 444"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Номер карты” появится  сообщение "Неверный формат"

### Сценарий 4
*Отправка заявки с пустым полем “Месяц”*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = ""

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Месяц” появится  сообщение "Неверный формат".

### *Сценарий 5
Отправка заявки с невалидным значением в поле “Месяц” (указать в поле  “Месяц” месяц “00”)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "00"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Месяц” появится  сообщение "Неверно указан срок действия карты".

### *Сценарий 6
Отправка заявки с невалидным значением в поле “Месяц”(указать в поле  “Месяц” месяц “13”)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "13"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Месяц” появится  сообщение "Неверно указан срок действия карты".

### Сценарий 7
*Отправка заявки с невалидным значением в поле “Месяц” (указать в поле  “Месяц” одну цифру)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "2"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Месяц” появится  сообщение "Неверный формат".

### Сценарий 8
*Отправка заявки с невалидным значением в поле “Месяц” (указать в поле  “Месяц” месяц, предшествующим текущему текущего года)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "02"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Месяц” появится  сообщение "Неверно указан срок действия карты".

### Сценарий 9
*Отправка заявки с пустым полем “Год”*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Год” появится  сообщение "Неверный формат".

### Сценарий 10
*Отправка заявки с невалидным значением в поле “Год” (указание в поле “Год”просроченного срока действия банковской карты)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить";
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "22" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Год” появится  сообщение "Истёк срок действия карты".

### Сценарий 11
*Отправка заявки с невалидным значением в поле “Год” (указание в поле “Год” значения текущий год + 6)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить";
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "29"

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Год” появится  сообщение "Неверно указан срок действия карты".

### Сценарий 12
*Отправка заявки с невалидным значением в поле “Год” (указание в поле “Год” одной цифры)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "1" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Год” появится  сообщение "Неверный формат".

### Сценарий 13
*Отправка заявки с пустым полем “Владелец”*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = " "

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Поле обязательно для заполнения".

### Сценарий 14
*Отправка заявки с невалидным значением в поле “Владелец” (указание в поле “Владелец” пробела в начале поля)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = " Ivanov Ivan"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 15
*Отправка заявки с невалидным значением в поле “Владелец” (указание в поле “Владелец” пробела в конце поля)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = ""23 

"Владелец" = "Ivanov Ivan "

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 16
*Отправка заявки с невалидным значением в поле “Владелец” (ввод в поле “Владелец” любого спецсимвола)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "I@vanov Ivan "

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 17
*Отправка заявки с невалидным значением в поле “Владелец” (ввод в поле “Владелец”  цифр)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "12345"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 18 
*Отправка заявки с невалидным значением в поле “Владелец” (ввод в поле “Владелец”  одной буквы)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "A"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить”

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 19 
*Отправка заявки с невалидным значением в поле “Владелец” (ввод в поле “Владелец”  апострофа)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan’a"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 20
*Отправка заявки с невалидным значением в поле “Владелец” (ввод в поле “Владелец”  апострофа)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan’a"

"CVC/CVV" = "123"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “Владелец” появится  сообщение "Неверный формат".

### Сценарий 21
*Отправка заявки с пустым полем “CVC/CVV”*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = ""

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “CVC/CVV” появится  сообщение "Поле обязательно для заполнения".

### Сценарий 22
*Отправка заявки с невалидным значением в поле “CVC/CVV” (ввод в поле “CVC/CVV” одной цифры)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "1"

4. Кликнуть на кнопку "Продолжить"

*Ожидаемый результат:*

Данные не отправлены.

Под полем “CVC/CVV” появится  сообщение "Неверный формат".

### Сценарий 23
*Отправка заявки с невалидным значением в поле “CVC/CVV” (ввод в поле “CVC/CVV” двух цифры)*

*Шаги воспроизведения:*
1. Открыть главную [страницу покупки тура](https://localhost:8080/)
2. Кликнуть на кнопку "Купить"
3. Ввести данные карты в форму “Оплата по карте”

"Номер карты" = "4444 4444 4444 4441"

"Месяц" = "05"

"Год" = "23" 

"Владелец" = "Ivanov Ivan"

"CVC/CVV" = "12”

4. Кликнуть на кнопку "Продолжить"


*Ожидаемый результат:*

Данные не отправлены.

Под полем “CVC/CVV” появится  сообщение "Неверный формат".

Аналогичные тестовые сценарии для заявки  "Купить в кредит”.

## Тестирование API

Необходимо проверить банковские карты и их статусы в базе данных через API.

## 2. Перечень используемых инструментов
* IntelliJ IDEA

Одна из наиболее востребованных сред разработки от компании JetBrains для создания, тестирования и анализа ПО с применением широкого набора библиотек и языков программирования под различные операционные системы.

* Java 11

Язык написания автотестов.

* Gradle

Инструмент автоматизации сборки и управления зависимостями, которые сами выкачивают нужные библиотеки (и зависимости этих библиотек и т.д.).

* JUnit 5

Платформа для написания автотестов и их запуска.

* Git и Github

Система контроля версий для хранения исходного кода, в том числе автотестов. Предоставляет возможность изменять (или дополнять) проект по мере необходимости.

* Selenide

Фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver.

* Lombok 

Библиотека, позволяющая сократить время написания и количество строк кода за счет автоматически генерируемых конструкторов. Подключается к среде разработки (IDE) или инструменту сборки приложений Maven, Gradle в качестве плагина. 

* Faker

Библиотека для генерации данных

* Docker

Программная платформа для быстрой разработки, тестирования и развертывания приложений.

* Allure

Фрейворк для создания визуальной картины выполнения тестов. Дает подробный результат прохождения тестов.

## 3. Перечень и описание возможных рисков при автоматизации
* Отсутствие спецификации на приложение
* Отсутствие css-селекторов, либо сложность в их нахождении 
* Ошибки в тестах, связанные с некорректно сгенерированными данными плагином "Faker

## 4. Интервальная оценка с учётом рисков в часах
1. Планирование автоматизации тестирования - 10 часов.
2. Непосредственно сама автоматизация - 48 часов.
3. Подготовка отчетных документов по итогам автоматизированного тестирования - 5 часов.
4. Подготовка отчетных документов по итогам автоматизации - 10 часов.

## 5. План сдачи работ: когда будут готовы автотесты, результаты их прогона
1. Непосредственно сама автоматизация (написание и сдача автотестов) -в течение 7 рабочих дней после согласования плана;

Срок исполнения - до 15.03.23

2. Подготовка отчетных документов по итогам автоматизированного тестирования - в течении 5 рабочих дней после прогона автотестов;

Срок исполнения - до 23.03.23

3. Подготовка отчетных документов по итогам автоматизации -в течение 3 рабочих днях после завершения тестирования.

Срок исполнения - до 28.03.23
